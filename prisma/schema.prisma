generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql" // or your preferred database
    url      = env("DATABASE_URL")
}

//we'll store everything else about the user in ClerkJS's metadata
model User {
    id               Int               @id @default(autoincrement())
    practiceSessions PracticeSession[]
}

model Question {
    id               Int               @id @default(autoincrement())
    content          String
    category         String
    practiceSessions PracticeSession[]
    createdAt        DateTime          @default(now())
    updatedAt        DateTime          @updatedAt
}

model PracticeSession {
    id           Int       @id @default(autoincrement())
    user         User      @relation(fields: [userId], references: [id])
    userId       Int
    question     Question  @relation(fields: [questionId], references: [id])
    questionId   Int
    startTime    DateTime
    endTime      DateTime?
    recordingUrl String?
    transcript   String?
    feedback     Feedback?
    createdAt    DateTime  @default(now())
    updatedAt    DateTime  @updatedAt
}

model Feedback {
    id             Int    @id @default(autoincrement())
    content        String
    totalScore     Int //out of 100
    categoryScores Json

    practiceSession   PracticeSession @relation(fields: [practiceSessionId], references: [id])
    practiceSessionId Int             @unique
    createdAt         DateTime        @default(now())
    updatedAt         DateTime        @updatedAt
}
