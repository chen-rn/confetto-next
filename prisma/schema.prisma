generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql" // or your preferred database
    url      = env("DATABASE_URL")
}

//this is basically just to link between ClerkUserID and Prisma DB
model User {
    id               String            @id @default(uuid())
    practiceSessions PracticeSession[]
}

model Question {
    id               String            @id @default(uuid())
    content          String
    practiceSessions PracticeSession[]
    createdAt        DateTime          @default(now())
    updatedAt        DateTime          @updatedAt
}

model PracticeSession {
    id                     String    @id @default(uuid())
    user                   User      @relation(fields: [userId], references: [id])
    userId                 String
    question               Question  @relation(fields: [questionId], references: [id])
    questionId             String
    startTime              DateTime
    endTime                DateTime?
    recordingUrl           String?
    recordingTranscription String?
    transcript             String?
    feedback               Feedback?
    createdAt              DateTime  @default(now())
    updatedAt              DateTime  @updatedAt
}

model Feedback {
    id             String @id @default(uuid())
    content        String
    totalScore     Int //out of 100
    categoryScores Json

    practiceSession   PracticeSession @relation(fields: [practiceSessionId], references: [id])
    practiceSessionId String          @unique
    createdAt         DateTime        @default(now())
    updatedAt         DateTime        @updatedAt
}
